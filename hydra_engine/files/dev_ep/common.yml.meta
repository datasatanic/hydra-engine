# File metadata

FILE:
  type: 'yaml'
  path: 'files/dev_ep/common.yml' # Optional/ default: path w/o .meta

PARAMS:
    - site_name:
        type: string
        default_value: "site"
        sub_type: # optional for array
        sub_type_schema:
        readonly: False
        description: ""
        id: 4
        render:
          control: input_control
          display_name: "Site name"
          constraints:
    - ccfa_version:
        type: string
        default_value: "0.0.1"
        sub_type: # optional for array
        sub_type_schema:
        readonly: False
        description: ""
        id: 4
        render:
          control: input_control
          display_name: "CCFA version"
          constraints:
    - mgmt:
        type: dict
        default_value:
        sub_type:
        sub_type_schema:
          state:
            type: dict
            default_value:
            sub_type:
            sub_type_schema:
              subnet_name:
                type: string
                default_value: name
                sub_type:
                sub_type_schema:
                readonly: False
                description: ""
                render:
                  control: input_control
                  display_name: "Subnet name"
                  constraints:
              dc:
                type: string
                default_value: dc name
                sub_type:
                sub_type_schema:
                readonly: False
                description: ""
                render:
                  control: input_control
                  display_name: "Dc"
                  constraints:
              host_number:
                type: int
                default_value: 0
                sub_type: # optional for array
                sub_type_schema:
                readonly: False
                description: ""
                render:
                  control: number_control
                  display_name: "Host number"
                  constraints:
            readonly: False
            description: ""
            render:
              control: label_control
              display_name: "State"
              constraints:
          repos:
            type: dict
            default_value:
            sub_type:
            sub_type_schema:
              repohost_number:
                type: int
                default_value: 100
                sub_type: # optional for array
                sub_type_schema:
                readonly: False
                description: ""
                render:
                  control: number_control
                  display_name: "Repo host number"
                  constraints:
              subnet_name:
                type: string
                default_value: repos
                sub_type:
                sub_type_schema:
                readonly: False
                description: ""
                render:
                  control: input_control
                  display_name: "Subnet name"
                  constraints:
            readonly: False
            description: ""
            render:
              control: label_control
              display_name: "Repos"
              constraints:
        readonly: False
        description: ""
        id: 4
        render:
          control: label_control
          display_name: "Mgmt"
          constraints:
    - site:
        type: dict
        default_value:
        sub_type:
        sub_type_schema:
          avg_cpu_core_hz:
            type: int
            default_value: 2500
            sub_type: # optional for array
            sub_type_schema:
            readonly: False
            description: ""
            render:
              control: number_control
              display_name: "avg_cpu_core_hz"
              constraints:
        readonly: False
        description: ""
        id: 4
        render:
          control: label_control
          display_name: "site"
          constraints:
    - preset:
        default_value: "preset name"
        type: string
        sub_type: # optional for array
        sub_type_schema:
        readonly: False
        description: ""
        id: 4
        render:
          control: input_control
          display_name: "Preset"
          constraints:
    - providers:
        type: dict
        default_value:
        sub_type:
        sub_type_schema:
          cloud:
            type: string
            default_value: vSphereWithNSX
            sub_type: # optional for array
            sub_type_schema:
            readonly: False
            description: ""
            render:
              control: input_control
              display_name: "Cloud"
              constraints:
        readonly: False
        description: ""
        id: 4
        render:
          control: label_control
          display_name: "Providers"
          constraints:
    - dns:
        type: dict
        default_value:
        sub_type:
        sub_type_schema:
          recursors:
            type: array
            default_value:
              - "10.74.10.21"
              - "10.74.10.22"
              - "10.74.10.23"
              - "10.74.10.24"
              - "10.74.10.25"
            sub_type: string
            sub_type_schema:
            readonly: False
            description: ""
            render:
              control: input_control
              display_name: "recursors"
              constraints:
          forwarded_zones:
            type: array
            default_value: []
            sub_type: string
            sub_type_schema:
            readonly: False
            description: ""
            render:
              control: input_control
              display_name: "Forwarded zones"
              constraints:
        readonly: False
        description: ""
        id: 4
        render:
          control: label_control
          display_name: "Dns"
          constraints:
    - enabled_hosts:
        default_value:
          - cnhost
        type: array
        sub_type: string
        sub_type_schema:
        readonly: False
        description: ""
        id: 4
        render:
          control: input_control
          display_name: "Enabled hosts"
          constraints:
    - hosts:
        type: dict
        default_value:
        sub_type:
        sub_type_schema:
          images:
            type: array
            default_value:
              - type: vendor
                name: golden-test
              - type: cnhost
                name: "cnhost-${ for image in common.hosts.images: image.type => image.name }['vendor']"
              - type: basehost
                name: "basehost-${ for image in common.hosts.images: image.type => image.name }['vendor']"
              - type: pghost
                name: "pghost-${ for image in common.hosts.images: image.type => image.name }['vendor']"
              - type: opensearchhost
                name: "opensearchhost-${ for image in common.hosts.images: image.type => image.name }['vendor']"
            sub_type: composite
            sub_type_schema:
              type:
                default_value: ""
                type: string
                sub_type:
                sub_type_schema:
                readonly: True
                description: ""
                render:
                  control: input_control
                  display_name: "type"
                  constraints:
              name:
                default_value: ""
                type: string
                sub_type:
                sub_type_schema:
                readonly: False
                description: ""
                render:
                  control: input_control
                  display_name: "name"
                  constraints:
            readonly: False
            description: ""
            render:
              control: label_control
              display_name: "images"
              constraints:
        readonly: False
        description: ""
        id: 4
        render:
          control: label_control
          display_name: "hosts"
          constraints:
    - k8s:
        default_value:
        type: dict
        sub_type:
        sub_type_schema:
          containerRegistryAuthSecretName:
            default_value: "docker-registries-credentials"
            type: string
            sub_type:
            sub_type_schema:
            readonly: True
            description: ""
            render:
              control: input_control
              display_name: "containerRegistryAuthSecretName"
              constraints:
          api_endpoint_ip:
            default_value: "${ cidrhost({for network in common.networks: network.name => network}[common.vm.subnet_name].CIDR, 21)}"
            type: string
            sub_type:
            sub_type_schema:
            readonly: True
            description: ""
            render:
              control: input_control
              display_name: "api_endpoint_ip"
              constraints:
          use_k8s:
            default_value: True
            type: bool
            sub_type:
            sub_type_schema:
            readonly: True
            description: ""
            render:
              control: checkbox_control
              display_name: "use_k8s"
              constraints:
          storage:
            default_value:
            type: dict
            sub_type:
            sub_type_schema:
              volumes:
                default_value:
                  - name: opensearch-volume
                    capacity_gb: 200
                    host_path: /data/volumes/opensearch
                    node_affinity:
                      keys:
                        - opensearchhost
                      label: host-type
                  - name: vmstorage-volume
                    capacity_gb: 50
                    host_path: /data/volumes/vmstorage
                    node_affinity:
                      keys:
                        - victoriametricshost
                      label: host-type
                  - name: minio-volume
                    capacity_gb: 50
                    host_path: /data/volumes/minio
                    node_affinity:
                      keys:
                        - s3storagehost
                      label: host-type
                  - name: redis-volume
                    capacity_gb: 50
                    host_path: /data/volumes/redis
                    node_affinity:
                      keys:
                        - redishost
                      label: host-type
                type: array
                sub_type: composite
                sub_type_schema:
                  name:
                    default_value: ""
                    type: string
                    sub_type:
                    sub_type_schema:
                    readonly: True
                    description: ""
                    render:
                      control: input_control
                      display_name: "name"
                      constraints:
                  capacity_gb:
                    default_value: 0
                    type: int
                    sub_type:
                    sub_type_schema:
                    readonly: False
                    description: ""
                    render:
                      control: number_control
                      display_name: "capacity_gb"
                      constraints:
                  host_path:
                    default_value: ""
                    type: string
                    sub_type:
                    sub_type_schema:
                    readonly: True
                    description: ""
                    render:
                      control: input_control
                      display_name: "host_path"
                      constraints:
                  node_affinity:
                    default_value:
                    type: dict
                    sub_type:
                    sub_type_schema:
                      keys:
                        default_value: []
                        type: array
                        sub_type: string
                        sub_type_schema:
                        readonly: True
                        description: ""
                        render:
                          control: input_control
                          display_name: "keys"
                          constraints:
                      label:
                        default_value: ""
                        type: string
                        sub_type:
                        sub_type_schema:
                        readonly: True
                        description: ""
                        render:
                          control: input_control
                          display_name: "label"
                          constraints:
                    readonly: False
                    description: ""
                    render:
                      control: label_control
                      display_name: "node_affinity"
                      constraints:
                readonly: True
                description: ""
                render:
                  control: label_control
                  display_name: "volumes"
                  constraints:
              volume_claims:
                default_value:
                  - name: opensearch-volume-claim
                    access_modes:
                      - ReadWriteOnce
                    capacity_gb: 200
                    storage_class_name: local-storage
                    volume_name: opensearch-volume
                  - name: vmstorage-volume-claim
                    access_modes:
                      - ReadWriteOnce
                    capacity_gb: 50
                    storage_class_name: local-storage
                    volume_name: vmstorage-volume
                  - name: redis-volume-claim
                    access_modes:
                      - ReadWriteOnce
                    capacity_gb: 50
                    storage_class_name: local-storage
                    volume_name: redis-volume
                  - name: minio-volume-claim
                    access_modes:
                      - ReadWriteOnce
                    capacity_gb: 50
                    storage_class_name: local-storage
                    volume_name: minio-volume
                type: array
                sub_type: composite
                sub_type_schema:
                  name:
                    default_value: ""
                    type: string
                    sub_type:
                    sub_type_schema:
                    readonly: True
                    description: ""
                    render:
                      control: input_control
                      display_name: "name"
                      constraints:
                  access_modes:
                    default_value: []
                    type: array
                    sub_type: string
                    sub_type_schema:
                    readonly: True
                    description: ""
                    render:
                      control: input_control
                      display_name: "access_modes"
                      constraints:
                  capacity_gb:
                    default_value: 0
                    type: int
                    sub_type:
                    sub_type_schema:
                    readonly: False
                    description: ""
                    render:
                      control: number_control
                      display_name: "capacity_gb"
                      constraints:
                  storage_class_name:
                    default_value: ""
                    type: string
                    sub_type:
                    sub_type_schema:
                    readonly: True
                    description: ""
                    render:
                      control: input_control
                      display_name: "storage_class_name"
                      constraints:
                  volume_name:
                    default_value: ""
                    type: string
                    sub_type:
                    sub_type_schema:
                    readonly: True
                    description: ""
                    render:
                      control: input_control
                      display_name: "volume_name"
                      constraints:
                readonly: True
                description: ""
                render:
                  control: label_control
                  display_name: "volume_claims"
                  constraints:
            readonly: False
            description: ""
            render:
              control: label_control
              display_name: "storage"
              constraints:
        readonly: False
        description: ""
        id: 4
        render:
          control: label_control
          display_name: "k8s"
          constraints: